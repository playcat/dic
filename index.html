<!DOCTYPE html>
<html>
<head>
  <title>DIC: Stay calm, nice and supportive. And remember...</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@fireworks-js/browser"></script>
</head>
<body>
  <a href="https://dic.digital/github.html" class="top-link">Powered by GitHub! Wasting no money :)</a>
  <div class="container">
    <div id="timer" class="timer">
      <div class="timer-labels">
        Days:<br>
        Hours:<br>
        Minutes:<br>
        Seconds:
      </div>
      <div class="timer-values" id="timer-values">
        Loading...
      </div>
    </div>
    <div id="milestones" class="milestones">
      <span id="milestone30" class="inactive-milestone">Under 30</span> |
      <span id="milestone20" class="inactive-milestone">Under 20</span> |
      <span id="milestone15" class="inactive-milestone">Halfway there</span> |
      <span id="milestone10" class="inactive-milestone">Under 10</span> |
      <span id="milestone4" class="inactive-milestone">Sweet suffering</span>
    </div>
  </div>

  <script>
    function updateTime() {
      var now = new Date();
      var target = new Date(now.getFullYear(), now.getMonth(), 25, 7, 0, 0);
      if (now > target) {
        target.setMonth(target.getMonth() + 1);
      }

      var diff = Math.floor((target - now) / 1000);
      var days = Math.floor(diff / (60 * 60 * 24));
      diff -= days * (60 * 60 * 24);
      var hours = Math.floor(diff / (60 * 60));
      diff -= hours * (60 * 60);
      var minutes = Math.floor(diff / 60);
      diff -= minutes * 60;
      var seconds = diff;

      document.getElementById("timer-values").innerHTML = days + "<br>" + hours + "<br>" + minutes + "<br>" + seconds;
      updateMilestones(days);

      if (!fireworkStarted && days < 4) {
        fireworkStarted = true
        fireworks.start()
      }
    }

    function updateMilestones(days) {
      document.getElementById("milestone30").className = days < 30 ? "active-milestone" : "inactive-milestone";
      document.getElementById("milestone20").className = days < 20 ? "active-milestone" : "inactive-milestone";
      document.getElementById("milestone15").className = days <= 15 ? "active-milestone blink" : "inactive-milestone";
      document.getElementById("milestone10").className = days < 10 ? "active-milestone" : "inactive-milestone";
      document.getElementById("milestone4").className = days < 4 ? "special-milestone blink" : "inactive-milestone";
    }

    // Fireworks effect initialization
    const fireworks = new Fireworks({
      target: document.body,
      hue: 120,
      startDelay: 1,
      minDelay: 20,
      maxDelay: 30,
      speed: 2,
      acceleration: 1.05,
      friction: 0.98,
      gravity: 1,
      particles: 75,
      trace: 3,
      explosion: 5,
      boundaries: {
        top: 50,
        bottom: document.body.clientHeight,
        left: 50,
        right: document.body.clientWidth
      },
      sound: {
        enabled: false,
        files: [
          'https://example.com/sounds/explosion0.mp3',
          'https://example.com/sounds/explosion1.mp3',
          'https://example.com/sounds/explosion2.mp3'
        ],
        volume: { min: 1, max: 2 }
      }
    });

    var fireworkStarted = false;
    setInterval(updateTime, 1000);
    updateTime();
  </script>
</body>
</html>
